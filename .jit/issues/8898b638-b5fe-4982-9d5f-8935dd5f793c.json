{
  "id": "8898b638-b5fe-4982-9d5f-8935dd5f793c",
  "title": "jit init should regenerate worktree.json in new worktrees",
  "description": "## Problem\n\nWhen creating a new git worktree with `git worktree add`, git copies the entire directory structure including `.jit/worktree.json`. This causes duplicate worktree IDs.\n\n**Current behavior:**\n```bash\n# In main worktree\ngit worktree add ../feature -b feature/my-work\ncd ../feature\njit init\njit worktree list\n# Shows both worktrees with SAME worktree ID (wt:abc12345)\n```\n\n**Why it happens:**\n1. `git worktree add` copies `.jit/worktree.json` from source worktree\n2. The copied file contains the source worktree's root path\n3. `jit init` doesn't check or remove this copied file\n4. When jit commands run, `load_or_create_worktree_identity` sees the file exists and treats it as a \"relocation\", preserving the same ID\n\n## Solution\n\nModify `jit init` to:\n1. Detect if we're in a git worktree (not main worktree) using `WorktreePaths::is_worktree()`\n2. Check if `.jit/worktree.json` exists and read it\n3. Compare `identity.root` with current worktree path\n4. If paths don't match (indicates copied file), delete it\n5. Let subsequent commands call `load_or_create_worktree_identity` to generate fresh identity\n\nThis approach is idempotent - calling `jit init` multiple times in the same worktree won't regenerate the ID.\n\n## Acceptance Criteria\n\n- [ ] `jit init` in a new worktree generates unique worktree ID\n- [ ] `jit init` called again in same worktree preserves existing ID (idempotent)\n- [ ] `jit worktree list` shows distinct IDs for each worktree\n- [ ] Main worktree behavior unchanged\n- [ ] Tests verify all scenarios",
  "state": "in_progress",
  "priority": "normal",
  "assignee": "agent:copilot-session",
  "dependencies": [],
  "gates_required": [],
  "gates_status": {},
  "context": {},
  "documents": [],
  "labels": [
    "type:bug",
    "component:core",
    "epic:production-polish"
  ]
}
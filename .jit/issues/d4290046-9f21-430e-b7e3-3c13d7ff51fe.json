{
  "id": "d4290046-9f21-430e-b7e3-3c13d7ff51fe",
  "title": "Improve DAG layout for large graphs in web UI",
  "description": "## Objective\n\nImplement a hierarchy-aware DAG visualization system with clustering and progressive disclosure that makes large dependency graphs (100+ issues) readable and navigable in the web UI.\n\n## Approach\n\n**Hierarchy-aware subgraph clustering with collapsible containers:**\n\n1. **Epic-level clustering**: Group tasks/stories under their parent epics\n2. **Visual containers**: Epic nodes become collapsible boxes containing their work\n3. **Hybrid layout**: Grid for independent clusters, ranked columns for dependent clusters\n4. **Left-to-right flow**: Dependencies flow temporally (prerequisites on left)\n5. **Progressive disclosure**: Collapse/expand containers to manage complexity\n6. **Edge aggregation**: Virtual edges when containers collapse\n\n## Implementation Phases\n\n### Phase 1: Core Infrastructure âœ… COMPLETE\n**Issue:** 783a8086 (DONE)\n\n- Hierarchy-agnostic data structures\n- Subgraph assignment algorithm\n- Cluster-aware layout with hybrid grid+rank positioning\n- Visual cluster containers with proper edge rendering\n- Stable, deterministic layout (no shuffling)\n\n**Deliverables:**\n- 22 clusters rendered (18 in grid, 4 ranked by dependencies)\n- All edge types working (internal, cross-cluster, virtual, boundary)\n- 508 lines of clean, modular code\n- 133 tests passing\n\n### Phase 2: Collapse/Expand Interactivity ðŸ“‹ NEXT\n**Issue:** 6f678db0 (READY)\n\n- Interactive cluster container collapse/expand\n- Story-level collapse within clusters\n- Virtual edge aggregation on collapse\n- Expansion state persistence (URL params)\n- Visual polish (animations, icons, badges)\n\n### Phase 3: Advanced Features & Polish ðŸ“‹ OPTIONAL\n**Issue:** 402d1a8f (READY)\n\n- Edge styling improvements (thickness, colors, labels)\n- Advanced navigation (minimap, zoom, search, path tracing)\n- Performance optimizations (virtual scrolling, memoization)\n- Export and sharing (SVG/PNG, shareable links)\n\n## Success Criteria\n\n- [x] Visual cluster boxes grouping related work\n- [x] Proper leftâ†’right dependency flow\n- [x] Efficient 2D space usage\n- [x] Stable layout (no shuffling on re-render)\n- [x] Works with real repo data (165+ issues)\n- [ ] Interactive collapse/expand (Phase 2)\n- [ ] Shareable view state (Phase 2)\n\n## Documentation\n\n- **dev/design/subgraph-clustering-layout.md** - Full implementation plan\n- **dev/design/exploration-dag.md** - Original exploration plan",
  "state": "backlog",
  "priority": "normal",
  "assignee": null,
  "dependencies": [
    "6f678db0-aef5-4986-95d4-71fa63548fd2",
    "783a8086-2933-4b6a-9d4a-b5c5f1d3ddc0",
    "402d1a8f-3eec-42ef-aecc-a5c1c783405b"
  ],
  "gates_required": [],
  "gates_status": {},
  "context": {},
  "documents": [
    {
      "path": "dev/design/exploration-dag.md",
      "commit": null,
      "label": "DAG exploration plan",
      "doc_type": "design",
      "format": "markdown"
    },
    {
      "path": "dev/design/subgraph-clustering-layout.md",
      "commit": null,
      "label": "Subgraph Clustering Layout Implementation Plan",
      "doc_type": "design"
    }
  ],
  "labels": [
    "epic:production-polish",
    "component:web",
    "type:story"
  ]
}
{
  "id": "d4290046-9f21-430e-b7e3-3c13d7ff51fe",
  "title": "Improve DAG layout for large graphs in web UI",
  "description": "## Objective\n\nImplement a zoom-aware, hierarchy-aware DAG exploration system that makes large dependency graphs (100+ issues) readable and navigable in the web UI.\n\n## Architectural Approach\n\nReplace the current unbounded dagre layout with a **milestone-anchored, progressive disclosure system**:\n\n1. **Milestone columns as X-axis**: Width is proportional to *visible milestones*, not graph complexity\n2. **Time-monotonic dependencies**: Enforce left-to-right flow (prerequisites always left of dependents)\n3. **Hierarchy-first structure**: Milestone → Epic → Story → Task\n4. **Bounded height**: Progressive collapse with deterministic budgets (never stack everything)\n5. **Edge bundling**: Aggregate edges at appropriate zoom tiers; expand on demand\n\n## Key Invariants\n\n- Milestones define global X-axis (chronological columns)\n- Dependencies flow with time: for every edge u → v, enforce milestoneIndex(u) ≤ milestoneIndex(v)\n- Each task has a single visual home (de-duplicate shared dependencies)\n- Layout stability: ordering derived from local dependency topology + stable issue IDs\n- Height is budgeted: collapse progressively with deterministic rules\n\n## Implementation Phases\n\n1. **Phase 1**: Milestone windowing + exploration DAG (immediate relief)\n2. **Phase 2**: Custom layout engine with anchored columns + hierarchical packing\n3. **Phase 3**: Edge bundling + zoom tiers\n4. **Phase 4**: Performance optimization (Web Worker, caching, incremental repack)\n5. **Phase 5**: UX polish (side panels, mini-map, telemetry)\n\n## Acceptance Criteria\n\n- [ ] Width bounded by visible milestone window (old milestones collapsed)\n- [ ] Height bounded by budgets (epics visible, stories/tasks fold by default)\n- [ ] L→R semantics always hold (no Dagre-induced inversions)\n- [ ] Stable layout (expanding/collapsing unfolds deterministically)\n- [ ] Fast \"why/what's needed\" flows (path-based reveal shows minimal subgraph)\n\nSee linked design document for full details.",
  "state": "backlog",
  "priority": "normal",
  "assignee": null,
  "dependencies": [
    "6f678db0-aef5-4986-95d4-71fa63548fd2",
    "783a8086-2933-4b6a-9d4a-b5c5f1d3ddc0",
    "1f10fe7c-7a8e-4962-b4e4-639a65834876",
    "7ef1d3d9-0afa-40cc-91c3-167f2b4dc7a4",
    "402d1a8f-3eec-42ef-aecc-a5c1c783405b"
  ],
  "gates_required": [],
  "gates_status": {},
  "context": {},
  "documents": [
    {
      "path": "dev/design/exploration-dag.md",
      "commit": null,
      "label": "DAG exploration plan",
      "doc_type": "design",
      "format": "markdown"
    }
  ],
  "labels": [
    "epic:production-polish",
    "component:web",
    "type:story"
  ]
}
{
  "id": "cbf75d46-2bea-46ce-8b70-80ae2f8e003d",
  "title": "Implement FromStr trait for State and Priority enums",
  "description": "## Problem\n\nCurrently `State` and `Priority` enums lack `FromStr` trait implementation. Instead, we have standalone parsing functions `parse_state()` and `parse_priority()` in `commands/mod.rs`.\n\nThis is unintuitive because:\n- Standard Rust pattern is to implement `FromStr` for enums\n- Makes enums feel incomplete/unusual  \n- Forces developers to hunt for parsing functions\n- Can't use standard `str::parse()` method\n\n## Current Pattern\n\n```rust\n// In commands/mod.rs\npub fn parse_state(s: &str) -> Result<State> { ... }\npub fn parse_priority(s: &str) -> Result<Priority> { ... }\n\n// Usage throughout codebase\nlet state = parse_state(\"ready\")?;\n```\n\n## Desired Pattern\n\n```rust\n// In domain.rs\nimpl FromStr for State {\n    type Err = anyhow::Error;\n    fn from_str(s: &str) -> Result<Self> {\n        // Case-insensitive parsing\n        match s.to_lowercase().as_str() {\n            \"backlog\" => Ok(State::Backlog),\n            \"ready\" => Ok(State::Ready),\n            \"in_progress\" | \"inprogress\" => Ok(State::InProgress),\n            \"gated\" => Ok(State::Gated),\n            \"done\" => Ok(State::Done),\n            \"rejected\" => Ok(State::Rejected),\n            \"archived\" => Ok(State::Archived),\n            _ => Err(anyhow!(\"Invalid state: {}\", s)),\n        }\n    }\n}\n\nimpl FromStr for Priority {\n    type Err = anyhow::Error;\n    fn from_str(s: &str) -> Result<Self> { ... }\n}\n\n// Usage (standard Rust)\nlet state: State = \"ready\".parse()?;\nlet state = State::from_str(\"ready\")?;\n```\n\n## Implementation\n\n1. Add `use std::str::FromStr;` to domain.rs\n2. Implement `FromStr` for `State` (move logic from `parse_state`)\n3. Implement `FromStr` for `Priority` (move logic from `parse_priority`)  \n4. Update `parse_state()` to call `State::from_str()` (keep for backward compat)\n5. Update `parse_priority()` to call `Priority::from_str()`\n6. Update query evaluator to use `State::from_str()` and `Priority::from_str()`\n7. Add tests in domain.rs\n8. Update documentation\n\n## Benefits\n\n- Follows standard Rust conventions\n- Better discoverability (trait shows up in docs)\n- Enables `str::parse()` method\n- Consistent with other Rust enums\n- Backward compatible (keep helper functions)\n\n## Acceptance Criteria\n\n- [ ] `State` implements `FromStr` trait\n- [ ] `Priority` implements `FromStr` trait\n- [ ] Case-insensitive parsing works\n- [ ] Existing `parse_state()` and `parse_priority()` still work (call trait impl)\n- [ ] All existing tests pass\n- [ ] New tests in domain.rs cover FromStr implementations\n- [ ] Query evaluator updated to use `from_str()` directly",
  "state": "in_progress",
  "priority": "normal",
  "assignee": "agent:copilot-session",
  "dependencies": [],
  "gates_required": [],
  "gates_status": {},
  "context": {},
  "documents": [],
  "labels": [
    "type:task",
    "epic:production-polish",
    "component:core"
  ]
}
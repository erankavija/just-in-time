{
  "id": "304573c5-e65e-47e8-923a-f446da8ff6fb",
  "title": "Unify claim commands: make jit issue claim use lease system",
  "description": "## Problem\n\nIn multi-agent scenarios, `jit issue claim` bypasses the lease coordination system entirely:\n\n1. Agent A acquires lease on issue X via `jit claim acquire`\n2. Agent B uses `jit issue claim` on issue X \u2192 succeeds (no lease check!)\n3. Both agents think they own the issue \u2192 conflict\n\nThis defeats the purpose of the lease-based coordination we built for parallel work.\n\n## Proposed Solution\n\nUnify the two claim mechanisms so there's one path for claiming work:\n\n### Option A: Make `jit claim acquire` set assignee\n- `jit claim acquire` also sets the `assignee` field automatically\n- `jit issue claim` becomes an alias for `jit claim acquire --ttl 0` (indefinite lease)\n- Single dev: uses indefinite leases, same experience\n- Multi-agent: uses TTL leases, coordination enforced\n\n### Option B: Make `jit issue claim` require lease\n- `jit issue claim` checks for existing leases before assigning\n- Rejects if issue is leased by another agent\n- Or requires caller to hold the lease first\n\n### Option C: Remove `jit issue claim` from MCP\n- Agents must use `jit claim acquire`\n- Humans can still use `jit issue claim` for quick assignment\n- Simpler but less unified\n\n## Acceptance Criteria\n\n- [ ] Cannot claim an issue that another agent has leased\n- [ ] Single path for AI agents to claim work\n- [ ] Single dev experience unchanged (can still claim without coordination overhead if alone)\n- [ ] MCP server uses the correct unified command\n- [ ] Documentation updated\n\n## Context\n\nDiscovered during parallel agent testing - docs-worker used `jit issue claim` via MCP which bypassed lease coordination.",
  "state": "done",
  "priority": "high",
  "assignee": "agent:main-agent",
  "dependencies": [],
  "gates_required": [],
  "gates_status": {},
  "context": {},
  "documents": [],
  "labels": [
    "type:task",
    "epic:agent-validation",
    "milestone:v1.0",
    "component:cli",
    "component:core"
  ],
  "created_at": "2026-02-02T21:14:42.752728618Z",
  "updated_at": "2026-02-02T21:41:49.640724364Z"
}

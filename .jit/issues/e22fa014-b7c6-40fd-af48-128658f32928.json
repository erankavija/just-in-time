{
  "id": "e22fa014-b7c6-40fd-af48-128658f32928",
  "title": "Implement format adapter registry",
  "description": "Implement the core format adapter system with registry and trait definition. Foundation for multi-format document support (Markdown, AsciiDoc, reStructuredText, MDX).\n\n## Rationale\n\nDocuments come in many formats, not just Markdown. A pluggable adapter system allows jit to handle multiple formats while keeping format-specific logic isolated.\n\n## Acceptance Criteria\n\n### 1. Define DocFormatAdapter Trait\n\nCreate crates/jit/src/document/adapter.rs with trait for format adapters.\n\nTrait methods:\n- id() - adapter identifier (e.g., \"markdown\", \"asciidoc\")\n- supports_path() - check file extension\n- detect() - content-based format detection\n- scan_assets() - extract asset references from content\n- rewrite_links() - update links when docs/assets move\n\n### 2. Implement AdapterRegistry\n\nRegistry to manage and resolve format adapters:\n- Register built-in adapters\n- Resolve adapter for path + content\n- Extension match first, then content detection\n\n### 3. Implement Markdown Adapter\n\nBasic Markdown adapter with:\n- Extension detection: .md, .markdown\n- Image syntax patterns\n- Link syntax patterns\n- Support relative and root-relative paths\n- Extract unique asset paths\n\n### 4. Unit Tests\n\n- Trait implementation tests\n- Registry registration and resolution\n- Markdown adapter asset extraction with various syntaxes\n- Edge cases: malformed syntax, external URLs, anchors\n\n### 5. Documentation\n\n- Rustdoc for trait and registry\n- Examples showing adapter usage\n- How to add new format adapters\n\n## Out of Scope (Phase 2+)\n\n- Link rewriting implementation (stub for now)\n- AsciiDoc, reStructuredText, MDX adapters\n- Configuration-based adapter enable/disable\n\n## Success Metrics\n\n- Trait and registry implemented with full rustdoc\n- Markdown adapter functional\n- 100% test coverage for adapter logic\n- clippy, fmt pass",
  "state": "done",
  "priority": "high",
  "assignee": "copilot:session-1",
  "dependencies": [
    "ba3e3884-ca9c-4a51-8ced-2fb833050193"
  ],
  "gates_required": [
    "tdd-reminder",
    "tests",
    "clippy",
    "fmt",
    "code-review"
  ],
  "gates_status": {
    "fmt": {
      "status": "passed",
      "updated_by": "auto:executor",
      "updated_at": "2025-12-22T23:15:22.909393579Z"
    },
    "tdd-reminder": {
      "status": "passed",
      "updated_by": "copilot:session-1",
      "updated_at": "2025-12-22T23:13:03.057103382Z"
    },
    "clippy": {
      "status": "passed",
      "updated_by": "auto:executor",
      "updated_at": "2025-12-22T23:15:22.908766629Z"
    },
    "tests": {
      "status": "passed",
      "updated_by": "auto:executor",
      "updated_at": "2025-12-22T23:15:22.907367508Z"
    },
    "code-review": {
      "status": "passed",
      "updated_by": "copilot:session-1",
      "updated_at": "2025-12-22T23:15:28.393016277Z"
    }
  },
  "context": {},
  "documents": [],
  "labels": [
    "type:task",
    "epic:docs-lifecycle",
    "milestone:v1.0",
    "component:core"
  ]
}
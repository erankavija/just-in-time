{
  "schema_version": 1,
  "run_id": "d411ce75-7098-4ccb-b1a5-db93933e9063",
  "gate_key": "fmt",
  "stage": "postcheck",
  "issue_id": "d41c6a08-81ce-491f-8bf9-6aab78febcbf",
  "commit": "052e4acd23ad768afa066d2339a322561b8ebd77",
  "branch": "feature/worktree-parallel-work",
  "status": "failed",
  "started_at": "2026-02-02T16:48:35.554877847Z",
  "completed_at": "2026-02-02T16:48:35.957475092Z",
  "duration_ms": 402,
  "exit_code": 1,
  "stdout": "Diff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:531:\n     /// Get effective coordination config with merged values.\n     pub fn coordination(&self) -> MergedCoordinationConfig {\n         MergedCoordinationConfig {\n\u001b[31m-            repo: self.repo_config.as_ref().and_then(|c| c.coordination.clone()),\n\u001b[m\u000f\u001b[31m-            user: self.user_config.as_ref().and_then(|c| c.coordination.clone()),\n\u001b[m\u000f\u001b[31m-            system: self.system_config.as_ref().and_then(|c| c.coordination.clone()),\n\u001b[m\u000f\u001b[32m+            repo: self\n\u001b[m\u000f\u001b[32m+                .repo_config\n\u001b[m\u000f\u001b[32m+                .as_ref()\n\u001b[m\u000f\u001b[32m+                .and_then(|c| c.coordination.clone()),\n\u001b[m\u000f\u001b[32m+            user: self\n\u001b[m\u000f\u001b[32m+                .user_config\n\u001b[m\u000f\u001b[32m+                .as_ref()\n\u001b[m\u000f\u001b[32m+                .and_then(|c| c.coordination.clone()),\n\u001b[m\u000f\u001b[32m+            system: self\n\u001b[m\u000f\u001b[32m+                .system_config\n\u001b[m\u000f\u001b[32m+                .as_ref()\n\u001b[m\u000f\u001b[32m+                .and_then(|c| c.coordination.clone()),\n\u001b[m\u000f         }\n     }\n \nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:540:\n     /// Get effective global operations config with merged values.\n     pub fn global_operations(&self) -> MergedGlobalOperationsConfig {\n         MergedGlobalOperationsConfig {\n\u001b[31m-            repo: self.repo_config.as_ref().and_then(|c| c.global_operations.clone()),\n\u001b[m\u000f\u001b[31m-            user: self.user_config.as_ref().and_then(|c| c.global_operations.clone()),\n\u001b[m\u000f\u001b[31m-            system: self.system_config.as_ref().and_then(|c| c.global_operations.clone()),\n\u001b[m\u000f\u001b[32m+            repo: self\n\u001b[m\u000f\u001b[32m+                .repo_config\n\u001b[m\u000f\u001b[32m+                .as_ref()\n\u001b[m\u000f\u001b[32m+                .and_then(|c| c.global_operations.clone()),\n\u001b[m\u000f\u001b[32m+            user: self\n\u001b[m\u000f\u001b[32m+                .user_config\n\u001b[m\u000f\u001b[32m+                .as_ref()\n\u001b[m\u000f\u001b[32m+                .and_then(|c| c.global_operations.clone()),\n\u001b[m\u000f\u001b[32m+            system: self\n\u001b[m\u000f\u001b[32m+                .system_config\n\u001b[m\u000f\u001b[32m+                .as_ref()\n\u001b[m\u000f\u001b[32m+                .and_then(|c| c.global_operations.clone()),\n\u001b[m\u000f         }\n     }\n \nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:575:\n \n impl MergedCoordinationConfig {\n     pub fn default_ttl_secs(&self) -> u64 {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.default_ttl_secs)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.default_ttl_secs)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.default_ttl_secs))\n             .or_else(|| self.system.as_ref().and_then(|c| c.default_ttl_secs))\n             .unwrap_or(600)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:582:\n     }\n \n     pub fn heartbeat_interval_secs(&self) -> u64 {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.heartbeat_interval_secs)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.heartbeat_interval_secs)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.heartbeat_interval_secs))\n             .or_else(|| self.system.as_ref().and_then(|c| c.heartbeat_interval_secs))\n             .unwrap_or(30)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:589:\n     }\n \n     pub fn lease_renewal_threshold_pct(&self) -> u8 {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.lease_renewal_threshold_pct)\n\u001b[m\u000f\u001b[31m-            .or_else(|| self.user.as_ref().and_then(|c| c.lease_renewal_threshold_pct))\n\u001b[m\u000f\u001b[31m-            .or_else(|| self.system.as_ref().and_then(|c| c.lease_renewal_threshold_pct))\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.lease_renewal_threshold_pct)\n\u001b[m\u000f\u001b[32m+            .or_else(|| {\n\u001b[m\u000f\u001b[32m+                self.user\n\u001b[m\u000f\u001b[32m+                    .as_ref()\n\u001b[m\u000f\u001b[32m+                    .and_then(|c| c.lease_renewal_threshold_pct)\n\u001b[m\u000f\u001b[32m+            })\n\u001b[m\u000f\u001b[32m+            .or_else(|| {\n\u001b[m\u000f\u001b[32m+                self.system\n\u001b[m\u000f\u001b[32m+                    .as_ref()\n\u001b[m\u000f\u001b[32m+                    .and_then(|c| c.lease_renewal_threshold_pct)\n\u001b[m\u000f\u001b[32m+            })\n\u001b[m\u000f             .unwrap_or(10)\n     }\n \nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:598:\n     pub fn stale_threshold_secs(&self) -> u64 {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.stale_threshold_secs)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.stale_threshold_secs)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.stale_threshold_secs))\n             .or_else(|| self.system.as_ref().and_then(|c| c.stale_threshold_secs))\n             .unwrap_or(3600)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:603:\n     }\n \n     pub fn max_indefinite_leases_per_agent(&self) -> u32 {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.max_indefinite_leases_per_agent)\n\u001b[m\u000f\u001b[31m-            .or_else(|| self.user.as_ref().and_then(|c| c.max_indefinite_leases_per_agent))\n\u001b[m\u000f\u001b[31m-            .or_else(|| self.system.as_ref().and_then(|c| c.max_indefinite_leases_per_agent))\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.max_indefinite_leases_per_agent)\n\u001b[m\u000f\u001b[32m+            .or_else(|| {\n\u001b[m\u000f\u001b[32m+                self.user\n\u001b[m\u000f\u001b[32m+                    .as_ref()\n\u001b[m\u000f\u001b[32m+                    .and_then(|c| c.max_indefinite_leases_per_agent)\n\u001b[m\u000f\u001b[32m+            })\n\u001b[m\u000f\u001b[32m+            .or_else(|| {\n\u001b[m\u000f\u001b[32m+                self.system\n\u001b[m\u000f\u001b[32m+                    .as_ref()\n\u001b[m\u000f\u001b[32m+                    .and_then(|c| c.max_indefinite_leases_per_agent)\n\u001b[m\u000f\u001b[32m+            })\n\u001b[m\u000f             .unwrap_or(2)\n     }\n \nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:612:\n     pub fn max_indefinite_leases_per_repo(&self) -> u32 {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.max_indefinite_leases_per_repo)\n\u001b[m\u000f\u001b[31m-            .or_else(|| self.user.as_ref().and_then(|c| c.max_indefinite_leases_per_repo))\n\u001b[m\u000f\u001b[31m-            .or_else(|| self.system.as_ref().and_then(|c| c.max_indefinite_leases_per_repo))\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.max_indefinite_leases_per_repo)\n\u001b[m\u000f\u001b[32m+            .or_else(|| {\n\u001b[m\u000f\u001b[32m+                self.user\n\u001b[m\u000f\u001b[32m+                    .as_ref()\n\u001b[m\u000f\u001b[32m+                    .and_then(|c| c.max_indefinite_leases_per_repo)\n\u001b[m\u000f\u001b[32m+            })\n\u001b[m\u000f\u001b[32m+            .or_else(|| {\n\u001b[m\u000f\u001b[32m+                self.system\n\u001b[m\u000f\u001b[32m+                    .as_ref()\n\u001b[m\u000f\u001b[32m+                    .and_then(|c| c.max_indefinite_leases_per_repo)\n\u001b[m\u000f\u001b[32m+            })\n\u001b[m\u000f             .unwrap_or(10)\n     }\n \nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:619:\n     pub fn auto_renew_leases(&self) -> bool {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.auto_renew_leases)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.auto_renew_leases)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.auto_renew_leases))\n             .or_else(|| self.system.as_ref().and_then(|c| c.auto_renew_leases))\n             .unwrap_or(false)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:634:\n \n impl MergedGlobalOperationsConfig {\n     pub fn require_main_history(&self) -> bool {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.require_main_history)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.require_main_history)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.require_main_history))\n             .or_else(|| self.system.as_ref().and_then(|c| c.require_main_history))\n             .unwrap_or(true)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:641:\n     }\n \n     pub fn allowed_branches(&self) -> Vec<String> {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.allowed_branches.clone())\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.allowed_branches.clone())\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.allowed_branches.clone()))\n\u001b[31m-            .or_else(|| self.system.as_ref().and_then(|c| c.allowed_branches.clone()))\n\u001b[m\u000f\u001b[32m+            .or_else(|| {\n\u001b[m\u000f\u001b[32m+                self.system\n\u001b[m\u000f\u001b[32m+                    .as_ref()\n\u001b[m\u000f\u001b[32m+                    .and_then(|c| c.allowed_branches.clone())\n\u001b[m\u000f\u001b[32m+            })\n\u001b[m\u000f             .unwrap_or_else(|| vec![\"main\".to_string()])\n     }\n }\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:658:\n \n impl MergedLocksConfig {\n     pub fn max_age_secs(&self) -> u64 {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.max_age_secs)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.max_age_secs)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.max_age_secs))\n             .or_else(|| self.system.as_ref().and_then(|c| c.max_age_secs))\n             .unwrap_or(3600)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:665:\n     }\n \n     pub fn enable_metadata(&self) -> bool {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.enable_metadata)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.enable_metadata)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.enable_metadata))\n             .or_else(|| self.system.as_ref().and_then(|c| c.enable_metadata))\n             .unwrap_or(true)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:682:\n \n impl MergedEventsConfig {\n     pub fn enable_sequences(&self) -> bool {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.enable_sequences)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.enable_sequences)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.enable_sequences))\n             .or_else(|| self.system.as_ref().and_then(|c| c.enable_sequences))\n             .unwrap_or(true)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:689:\n     }\n \n     pub fn use_unified_envelope(&self) -> bool {\n\u001b[31m-        self.repo.as_ref().and_then(|c| c.use_unified_envelope)\n\u001b[m\u000f\u001b[32m+        self.repo\n\u001b[m\u000f\u001b[32m+            .as_ref()\n\u001b[m\u000f\u001b[32m+            .and_then(|c| c.use_unified_envelope)\n\u001b[m\u000f             .or_else(|| self.user.as_ref().and_then(|c| c.use_unified_envelope))\n             .or_else(|| self.system.as_ref().and_then(|c| c.use_unified_envelope))\n             .unwrap_or(true)\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:1316:\n \"#;\n         std::fs::write(temp_dir.path().join(\"config.toml\"), config_toml).unwrap();\n \n\u001b[31m-        let loader = ConfigLoader::new().with_repo_config(temp_dir.path()).unwrap();\n\u001b[m\u000f\u001b[32m+        let loader = ConfigLoader::new()\n\u001b[m\u000f\u001b[32m+            .with_repo_config(temp_dir.path())\n\u001b[m\u000f\u001b[32m+            .unwrap();\n\u001b[m\u000f         let config = loader.build();\n \n         // Repo value overrides default\nDiff in /home/vkaskivuo/Projects/just-in-time/crates/jit/src/config.rs:1433:\n \"#;\n         std::fs::write(temp_dir.path().join(\"config.toml\"), config_toml).unwrap();\n \n\u001b[31m-        let loader = ConfigLoader::new().with_repo_config(temp_dir.path()).unwrap();\n\u001b[m\u000f\u001b[32m+        let loader = ConfigLoader::new()\n\u001b[m\u000f\u001b[32m+            .with_repo_config(temp_dir.path())\n\u001b[m\u000f\u001b[32m+            .unwrap();\n\u001b[m\u000f         let config = loader.build();\n \n         assert_eq!(config.worktree_mode().unwrap(), WorktreeMode::On);\n",
  "stderr": "",
  "command": "cargo fmt -- --check",
  "by": "auto:executor",
  "message": null
}
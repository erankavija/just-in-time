# JIT Configuration File (Schema v2)
#
# Place this file at `.jit/config.toml` to customize JIT behavior.
# All settings are optional - JIT uses sensible defaults if this file doesn't exist.

[version]
# Schema version - required for new features
schema = 2

# =============================================================================
# DOCUMENTATION LIFECYCLE
# =============================================================================
# Configure how JIT manages development documentation (design docs, session notes)

[documentation]
# Root directory for development documentation
development_root = "dev"

# Paths managed by JIT's document lifecycle (archived when issues complete)
managed_paths = ["dev/active", "dev/studies", "dev/sessions"]

# Where archived documents go
archive_root = "dev/archive"

# Paths that never archive (permanent documentation)
permanent_paths = ["docs/"]

# Archive category mappings (doc-type → archive subdirectory)
[documentation.categories]
design = "features"
analysis = "bug-fixes"
refactor = "refactorings"
session = "sessions"
study = "studies"

# =============================================================================
# TYPE HIERARCHY
# =============================================================================
# Define issue types and their strategic importance

[type_hierarchy]
# Type name to hierarchy level mapping (lower numbers = more strategic)
# Default: { milestone = 1, epic = 2, story = 3, task = 4 }
types = { milestone = 1, epic = 2, story = 3, task = 4, bug = 4, enhancement = 4 }

# Types shown in 'jit query strategic' (high-level planning view)
strategic_types = ["milestone", "epic"]

# Type → membership label namespace mapping
# Example: issues with type:epic use "epic:name" labels to group children
[type_hierarchy.label_associations]
milestone = "milestone"
epic = "epic"
story = "story"

# =============================================================================
# VALIDATION
# =============================================================================
# Control how strictly JIT validates issues and labels

[validation]
# Strictness level: "strict", "loose", or "permissive"
# - strict: Enforce all rules, fail on violations
# - loose: Warn on violations but allow operations (default)
# - permissive: Minimal validation
strictness = "loose"

# Auto-assign this type when creating issues without a type:* label
default_type = "task"

# Require exactly one type:* label per issue
require_type_label = false

# Label format validation regex
# Validates namespace:value format
label_regex = '^[a-z][a-z0-9-]*:[a-zA-Z0-9][a-zA-Z0-9._-]*$'

# Reject malformed labels vs warn (default: false)
reject_malformed_labels = false

# Only allow namespaces defined in [namespaces.*] sections (default: false)
enforce_namespace_registry = false

# Validation warnings (only apply when strictness = "loose")
warn_orphaned_leaves = true       # Warn when tasks lack parent labels
warn_strategic_consistency = true  # Warn on hierarchy inconsistencies

# =============================================================================
# NAMESPACE REGISTRY
# =============================================================================
# Define label namespaces for documentation and optional enforcement

[namespaces.type]
description = "Issue type (hierarchical). Exactly one per issue."
unique = true
examples = ["type:task", "type:story", "type:epic", "type:milestone"]

[namespaces.epic]
description = "Epic membership - which epic does this issue belong to?"
unique = false
examples = ["epic:auth", "epic:production-stability"]

[namespaces.milestone]
description = "Milestone membership - target release or time period"
unique = false
examples = ["milestone:v1.0", "milestone:2026-q1"]

[namespaces.story]
description = "Story membership - parent story for tasks"
unique = false
examples = ["story:user-login", "story:checkout-flow"]

[namespaces.component]
description = "Technical component or subsystem affected"
unique = false
examples = ["component:api", "component:web", "component:cli"]

[namespaces.team]
description = "Owning team"
unique = true
examples = ["team:core", "team:platform"]

[namespaces.resolution]
description = "Reason for issue closure (used with rejected state)"
unique = true
examples = ["resolution:wont-fix", "resolution:duplicate", "resolution:obsolete"]

# =============================================================================
# EXAMPLES: Alternative Configurations
# =============================================================================

# Minimal 2-level hierarchy (simple projects):
# [type_hierarchy]
# types = { epic = 1, task = 2 }
# strategic_types = ["epic"]
# [type_hierarchy.label_associations]
# epic = "epic"

# Extended 5-level hierarchy (large organizations):
# [type_hierarchy]
# types = { program = 1, milestone = 2, epic = 3, story = 4, task = 5 }
# strategic_types = ["program", "milestone", "epic"]
# [type_hierarchy.label_associations]
# program = "program"
# milestone = "milestone"
# epic = "epic"
# story = "story"

# Research project configuration:
# [type_hierarchy]
# types = { program = 1, study = 2, experiment = 3, analysis = 4 }
# strategic_types = ["program", "study"]
# [namespaces.dataset]
# description = "Dataset being analyzed"
# unique = false
# examples = ["dataset:census-2024", "dataset:survey-q1"]

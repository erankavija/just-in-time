{
  "version": "0.2.0",
  "commands": {
    "validate": {
      "description": "Validate repository integrity",
      "args": [],
      "flags": [
        {
          "name": "json",
          "type": "boolean",
          "description": "Output JSON format"
        }
      ],
      "output": {
        "success": "void",
        "error": "ErrorResponse"
      }
    },
    "dep": {
      "description": "Dependency management commands",
      "subcommands": {
        "add": {
          "description": "Add a dependency between issues",
          "args": [
            {
              "name": "from",
              "type": "string",
              "required": true,
              "description": "Issue that depends on another"
            },
            {
              "name": "to",
              "type": "string",
              "required": true,
              "description": "Issue that must be completed first"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "void",
            "error": "ErrorResponse"
          }
        },
        "rm": {
          "description": "Remove a dependency",
          "args": [
            {
              "name": "from",
              "type": "string",
              "required": true,
              "description": "Issue with the dependency"
            },
            {
              "name": "to",
              "type": "string",
              "required": true,
              "description": "Dependency to remove"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "void",
            "error": "ErrorResponse"
          }
        }
      },
      "args": [],
      "flags": []
    },
    "registry": {
      "description": "Gate registry management commands",
      "subcommands": {
        "show": {
          "description": "Show gate definition",
          "args": [
            {
              "name": "key",
              "type": "string",
              "required": true,
              "description": "Gate key"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "GateDefinition",
            "error": "ErrorResponse"
          }
        },
        "add": {
          "description": "Register a new gate definition",
          "args": [
            {
              "name": "key",
              "type": "string",
              "required": true,
              "description": "Gate key"
            },
            {
              "name": "name",
              "type": "string",
              "required": true,
              "description": "Gate name"
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "default": "",
              "description": "Gate description"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "void",
            "error": "ErrorResponse"
          }
        },
        "list": {
          "description": "List all registered gates",
          "args": [],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "GateList",
            "error": "ErrorResponse"
          }
        }
      },
      "args": [],
      "flags": []
    },
    "gate": {
      "description": "Gate management commands",
      "subcommands": {
        "pass": {
          "description": "Mark a gate as passed",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            },
            {
              "name": "gate",
              "type": "string",
              "required": true,
              "description": "Gate key"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "void",
            "error": "ErrorResponse"
          }
        },
        "add": {
          "description": "Add a gate to an issue",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            },
            {
              "name": "gate",
              "type": "string",
              "required": true,
              "description": "Gate key"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "void",
            "error": "ErrorResponse"
          }
        },
        "fail": {
          "description": "Mark a gate as failed",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            },
            {
              "name": "gate",
              "type": "string",
              "required": true,
              "description": "Gate key"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "void",
            "error": "ErrorResponse"
          }
        }
      },
      "args": [],
      "flags": []
    },
    "status": {
      "description": "Show overall repository status",
      "args": [],
      "flags": [
        {
          "name": "json",
          "type": "boolean",
          "description": "Output JSON format"
        }
      ],
      "output": {
        "success": "StatusSummary",
        "error": "ErrorResponse"
      }
    },
    "query": {
      "description": "Query issues for orchestrators",
      "subcommands": {
        "state": {
          "description": "Query issues by state",
          "args": [
            {
              "name": "state",
              "type": "string",
              "required": true,
              "description": "State to query"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        },
        "assignee": {
          "description": "Query issues by assignee",
          "args": [
            {
              "name": "assignee",
              "type": "string",
              "required": true,
              "description": "Assignee identifier"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        },
        "priority": {
          "description": "Query issues by priority",
          "args": [
            {
              "name": "priority",
              "type": "string",
              "required": true,
              "description": "Priority to query"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        },
        "blocked": {
          "description": "Query blocked issues",
          "args": [],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        },
        "ready": {
          "description": "Query ready issues",
          "args": [],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        }
      },
      "args": [],
      "flags": []
    },
    "events": {
      "description": "Event log commands",
      "subcommands": {
        "tail": {
          "description": "Show recent events",
          "args": [
            {
              "name": "n",
              "type": "number",
              "required": false,
              "default": "10",
              "description": "Number of events to show"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "EventList",
            "error": "ErrorResponse"
          }
        }
      },
      "args": [],
      "flags": []
    },
    "graph": {
      "description": "Graph query commands",
      "subcommands": {
        "export": {
          "description": "Export graph in various formats",
          "args": [
            {
              "name": "format",
              "type": "string",
              "required": true,
              "description": "Export format: dot, mermaid"
            }
          ],
          "flags": [],
          "output": {
            "success": "string",
            "error": "ErrorResponse"
          }
        },
        "downstream": {
          "description": "Show downstream issues (dependents)",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        },
        "show": {
          "description": "Show dependency graph",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": false,
              "description": "Issue ID to show subgraph for"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "Graph",
            "error": "ErrorResponse"
          }
        },
        "roots": {
          "description": "Show root issues (no dependencies)",
          "args": [],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        }
      },
      "args": [],
      "flags": []
    },
    "init": {
      "description": "Initialize the issue tracker in the current directory",
      "args": [],
      "flags": [],
      "output": {
        "success": "void",
        "error": "ErrorResponse"
      }
    },
    "issue": {
      "description": "Issue management commands",
      "subcommands": {
        "show": {
          "description": "Show issue details",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "Issue",
            "error": "ErrorResponse"
          }
        },
        "create": {
          "description": "Create a new issue",
          "args": [
            {
              "name": "title",
              "type": "string",
              "required": true,
              "description": "Issue title"
            },
            {
              "name": "desc",
              "type": "string",
              "required": false,
              "default": "",
              "description": "Issue description"
            },
            {
              "name": "priority",
              "type": "string",
              "required": false,
              "default": "normal",
              "description": "Priority: low, normal, high, critical"
            },
            {
              "name": "gate",
              "type": "array[string]",
              "required": false,
              "description": "Required gate keys"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "Issue",
            "error": "ErrorResponse"
          }
        },
        "delete": {
          "description": "Delete an issue",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "void",
            "error": "ErrorResponse"
          }
        },
        "unclaim": {
          "description": "Unclaim an issue",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "Issue",
            "error": "ErrorResponse"
          }
        },
        "search": {
          "description": "Search issues by text query",
          "args": [
            {
              "name": "query",
              "type": "string",
              "required": true,
              "description": "Search query (searches title, description, ID)"
            },
            {
              "name": "state",
              "type": "string",
              "required": false,
              "description": "Filter by state"
            },
            {
              "name": "assignee",
              "type": "string",
              "required": false,
              "description": "Filter by assignee"
            },
            {
              "name": "priority",
              "type": "string",
              "required": false,
              "description": "Filter by priority"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        },
        "update": {
          "description": "Update an issue",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            },
            {
              "name": "title",
              "type": "string",
              "required": false,
              "description": "New title"
            },
            {
              "name": "desc",
              "type": "string",
              "required": false,
              "description": "New description"
            },
            {
              "name": "priority",
              "type": "string",
              "required": false,
              "description": "New priority"
            },
            {
              "name": "state",
              "type": "string",
              "required": false,
              "description": "New state"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "Issue",
            "error": "ErrorResponse"
          }
        },
        "list": {
          "description": "List issues with optional filters",
          "args": [
            {
              "name": "state",
              "type": "string",
              "required": false,
              "description": "Filter by state"
            },
            {
              "name": "assignee",
              "type": "string",
              "required": false,
              "description": "Filter by assignee"
            },
            {
              "name": "priority",
              "type": "string",
              "required": false,
              "description": "Filter by priority"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "IssueList",
            "error": "ErrorResponse"
          }
        },
        "claim": {
          "description": "Claim an issue for an assignee",
          "args": [
            {
              "name": "id",
              "type": "string",
              "required": true,
              "description": "Issue ID"
            },
            {
              "name": "assignee",
              "type": "string",
              "required": true,
              "description": "Assignee identifier (type:id format)"
            }
          ],
          "flags": [
            {
              "name": "json",
              "type": "boolean",
              "description": "Output JSON format"
            }
          ],
          "output": {
            "success": "Issue",
            "error": "ErrorResponse"
          }
        }
      },
      "args": [],
      "flags": []
    }
  },
  "types": {
    "Priority": {
      "description": "Issue priority level",
      "enum": [
        "low",
        "normal",
        "high",
        "critical"
      ],
      "type": "enum"
    },
    "Issue": {
      "properties": {
        "assignee": {
          "type": [
            "string",
            "null"
          ]
        },
        "context": {
          "type": "object"
        },
        "created_at": {
          "format": "date-time",
          "type": "string"
        },
        "dependencies": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "description": {
          "type": "string"
        },
        "gates_required": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "gates_status": {
          "type": "object"
        },
        "id": {
          "type": "string"
        },
        "priority": {
          "$ref": "#/types/Priority"
        },
        "state": {
          "$ref": "#/types/State"
        },
        "title": {
          "type": "string"
        },
        "updated_at": {
          "format": "date-time",
          "type": "string"
        }
      },
      "type": "object"
    },
    "State": {
      "description": "Issue lifecycle state",
      "enum": [
        "open",
        "ready",
        "in_progress",
        "done",
        "archived"
      ],
      "type": "enum"
    },
    "ErrorResponse": {
      "properties": {
        "error": {
          "properties": {
            "code": {
              "type": "string"
            },
            "details": {
              "type": "object"
            },
            "message": {
              "type": "string"
            },
            "suggestions": {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "metadata": {
          "$ref": "#/types/Metadata"
        },
        "success": {
          "const": false,
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "GateStatus": {
      "description": "Quality gate status",
      "enum": [
        "pending",
        "passed",
        "failed"
      ],
      "type": "enum"
    },
    "Metadata": {
      "properties": {
        "timestamp": {
          "format": "date-time",
          "type": "string"
        },
        "version": {
          "type": "string"
        }
      },
      "type": "object"
    }
  },
  "exit_codes": [
    {
      "code": 0,
      "description": "Command succeeded"
    },
    {
      "code": 1,
      "description": "Generic error occurred"
    },
    {
      "code": 2,
      "description": "Invalid arguments or usage error"
    },
    {
      "code": 3,
      "description": "Resource not found (issue, gate, etc.)"
    },
    {
      "code": 4,
      "description": "Validation failed (cycle detected, broken references, etc.)"
    },
    {
      "code": 5,
      "description": "Permission denied"
    },
    {
      "code": 6,
      "description": "Resource already exists"
    },
    {
      "code": 10,
      "description": "External dependency failed (git, file system, etc.)"
    }
  ]
}
